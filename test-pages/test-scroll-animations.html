<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scroll Animations Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="utils/intersection-observer-manager.js"></script>
    <style>
        body {
            background: #111827;
            color: white;
            min-height: 300vh;
            padding: 2rem;
        }

        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .slide-up {
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }

        .slide-up.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .test-box {
            background: linear-gradient(145deg, rgba(99, 102, 241, 0.2), rgba(168, 85, 247, 0.2));
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 1rem;
            padding: 2rem;
            margin: 2rem 0;
            min-height: 200px;
        }

        .stagger-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .stagger-item {
            background: rgba(99, 102, 241, 0.1);
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 0.5rem;
            padding: 1.5rem;
            text-align: center;
        }
    </style>
</head>
<body>
    <h1 class="text-4xl font-bold mb-8">Scroll Animations Test</h1>
    
    <div class="test-box fade-in">
        <h2 class="text-2xl font-bold mb-4">Fade In Animation</h2>
        <p>This box should fade in when it enters the viewport.</p>
    </div>

    <div class="test-box slide-up">
        <h2 class="text-2xl font-bold mb-4">Slide Up Animation</h2>
        <p>This box should slide up when it enters the viewport.</p>
    </div>

    <div class="test-box">
        <h2 class="text-2xl font-bold mb-4">Stagger Children Animation</h2>
        <div class="stagger-container" id="staggerContainer">
            <div class="stagger-item fade-in">Item 1</div>
            <div class="stagger-item fade-in">Item 2</div>
            <div class="stagger-item fade-in">Item 3</div>
            <div class="stagger-item fade-in">Item 4</div>
            <div class="stagger-item fade-in">Item 5</div>
            <div class="stagger-item fade-in">Item 6</div>
        </div>
    </div>

    <div class="test-box fade-in">
        <h2 class="text-2xl font-bold mb-4">Another Fade In</h2>
        <p>Scroll down to see this animate.</p>
    </div>

    <div class="test-box slide-up">
        <h2 class="text-2xl font-bold mb-4">Another Slide Up</h2>
        <p>This should also slide up smoothly.</p>
    </div>

    <div class="test-box">
        <h2 class="text-2xl font-bold mb-4">Reduced Motion Test</h2>
        <p>Open DevTools and enable "prefers-reduced-motion" to test accessibility.</p>
        <p>Animations should be disabled when this preference is set.</p>
    </div>

    <script>
        window.addEventListener('DOMContentLoaded', () => {
            console.log('Testing IntersectionObserverManager...');

            // Initialize manager
            const animationManager = new IntersectionObserverManager({
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px',
                once: true
            });

            // Test fade-in animations
            document.querySelectorAll('.fade-in').forEach((element) => {
                // Skip items in stagger container
                if (element.closest('#staggerContainer')) return;
                
                animationManager.observe(element, () => {
                    console.log('Fade in triggered for:', element);
                    IntersectionObserverManager.fadeIn(element);
                });
            });

            // Test slide-up animations
            document.querySelectorAll('.slide-up').forEach((element) => {
                animationManager.observe(element, () => {
                    console.log('Slide up triggered for:', element);
                    IntersectionObserverManager.slideUp(element);
                });
            });

            // Test stagger children
            const staggerContainer = document.getElementById('staggerContainer');
            if (staggerContainer) {
                animationManager.observe(staggerContainer, () => {
                    console.log('Stagger children triggered');
                    IntersectionObserverManager.staggerChildren(staggerContainer, 100, 'fadeIn');
                });
            }

            console.log('IntersectionObserverManager initialized successfully!');
        });
    </script>
</body>
</html>
