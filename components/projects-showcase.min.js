class ProjectsShowcase extends HTMLElement{constructor(){super();this.projects = [];}async connectedCallback(){this.showSkeletonLoader();const dataSource = this.getAttribute('data-source')|| 'data/experiences.json';await this.loadProjects(dataSource);this.render();this.dispatchEvent(new CustomEvent('projects-loaded',{bubbles:true,detail:{count:this.projects.length}}));}showSkeletonLoader(){this.innerHTML = ` <style> .skeleton-grid{display:grid;grid-template-columns:repeat(1,1fr);gap:1.5rem;}@media(min-width:768px){.skeleton-grid{grid-template-columns:repeat(2,1fr);}}@media(min-width:1024px){.skeleton-grid{grid-template-columns:repeat(3,1fr);}}.skeleton-card{background:linear-gradient(145deg,rgba(31,41,55,0.5)0%,rgba(17,24,39,0.5)100%);backdrop-filter:blur(10px);padding:1.5rem;border-radius:1rem;border:1px solid rgba(99,102,241,0.2);height:300px;}.skeleton-title{width:70%;height:1.5rem;background:linear-gradient(90deg,rgba(99,102,241,0.1)25%,rgba(99,102,241,0.2)50%,rgba(99,102,241,0.1)75%);background-size:200% 100%;animation:shimmer 1.5s infinite;border-radius:0.5rem;margin-bottom:1rem;}.skeleton-description{width:100%;height:0.875rem;background:linear-gradient(90deg,rgba(99,102,241,0.1)25%,rgba(99,102,241,0.2)50%,rgba(99,102,241,0.1)75%);background-size:200% 100%;animation:shimmer 1.5s infinite;border-radius:0.5rem;margin-bottom:0.5rem;}.skeleton-tags{display:flex;gap:0.5rem;flex-wrap:wrap;margin-top:1rem;}.skeleton-tag{width:70px;height:1.5rem;background:linear-gradient(90deg,rgba(99,102,241,0.1)25%,rgba(99,102,241,0.2)50%,rgba(99,102,241,0.1)75%);background-size:200% 100%;animation:shimmer 1.5s infinite;border-radius:0.5rem;}.skeleton-footer{width:60%;height:1rem;background:linear-gradient(90deg,rgba(99,102,241,0.1)25%,rgba(99,102,241,0.2)50%,rgba(99,102,241,0.1)75%);background-size:200% 100%;animation:shimmer 1.5s infinite;border-radius:0.5rem;margin-top:1.5rem;padding-top:1rem;border-top:1px solid rgba(107,114,128,0.3);}@keyframes shimmer{0%{background-position:200% 0;}100%{background-position:-200% 0;}}</style> <div class="skeleton-grid"> ${Array(6).fill(0).map(()=> ` <div class="skeleton-card"> <div class="skeleton-title"></div> <div class="skeleton-description"></div> <div class="skeleton-description" style="width:95%;"></div> <div class="skeleton-description" style="width:80%;"></div> <div class="skeleton-tags"> <div class="skeleton-tag"></div> <div class="skeleton-tag"></div> <div class="skeleton-tag"></div> </div> <div class="skeleton-footer"></div> </div> `).join('')}</div> `;}async loadProjects(dataSource){try{const response = await fetch(dataSource);if(!response.ok){throw new Error(`HTTP error! status:${response.status}`);}const data = await response.json();this.projects = [];if(data.experiences && Array.isArray(data.experiences)){data.experiences.forEach(experience =>{if(experience.projects && Array.isArray(experience.projects)){experience.projects.forEach(project =>{this.projects.push({...project,company:experience.company,period:experience.period,experienceColor:experience.color});});}});}}catch(error){this.showError(dataSource);}}render(){if(this.projects.length === 0){this.innerHTML = '<p class="text-gray-400 text-center py-8">No projects available.</p>';return;}this.innerHTML = ` <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"> ${this.projects.map((project,index)=> this.renderProject(project,index)).join('')}</div> `;}renderProject(project,index){const colorClass = this.getColorClass(project.experienceColor || 'indigo');return ` <div class="fade-in" style="animation-delay:${index * 0.1}s;"> <div class="bg-gradient-to-br from-gray-800/50 to-gray-900/50 backdrop-blur-xl p-6 rounded-2xl shadow-2xl shadow-indigo-500/10 border border-indigo-500/20 hover:border-indigo-500/40 transition-all duration-300 h-full flex flex-col"> <project-item title="${this.escapeHtml(project.title)}" color="${project.experienceColor || 'indigo'}" description="${this.escapeHtml(project.description)}"> ${project.tags ? project.tags.map(tag => `<badge-tag color="${tag.color || 'indigo'}">${this.escapeHtml(tag.text)}</badge-tag>`).join(''):''}</project-item> ${project.company ? ` <div class="mt-4 pt-4 border-t border-gray-700/50"> <p class="text-sm text-gray-400"> <span class="font-medium text-${colorClass}">${this.escapeHtml(project.company)}</span> ${project.period ? `<span class="text-gray-500"> â€¢ ${this.escapeHtml(project.period)}</span>`:''}</p> </div> `:''}</div> </div> `;}getColorClass(color){const colorMap ={'indigo':'indigo-400','emerald':'emerald-400','gray':'gray-400','purple':'purple-400','blue':'blue-400'};return colorMap[color] || 'indigo-400';}escapeHtml(text){const div = document.createElement('div');div.textContent = text;return div.innerHTML;}showError(dataSource){this.innerHTML = ` <div class="bg-red-500/10 border border-red-500/30 rounded-lg p-6 text-center"> <svg class="w-12 h-12 text-red-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /> </svg> <p class="text-red-400 mb-4 font-semibold">Failed to Load Projects</p> <p class="text-red-300/80 text-sm mb-4">Unable to connect. Please check your internet connection and try again.</p> <button id="retryProjectsBtn" class="px-6 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-300 rounded-lg transition-all duration-300 font-medium border border-red-500/40 hover:border-red-500/60"> <svg class="inline-block w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /> </svg> Retry </button> </div> `;const retryBtn = this.querySelector('#retryProjectsBtn');if(retryBtn){retryBtn.addEventListener('click',async()=>{this.innerHTML = '<p class="text-gray-400 text-center py-8">Loading projects...</p>';await this.loadProjects(dataSource || this.getAttribute('data-source')|| 'data/experiences.json');this.render();this.dispatchEvent(new CustomEvent('projects-loaded',{bubbles:true,detail:{count:this.projects.length}}));});}}}customElements.define('projects-showcase',ProjectsShowcase);